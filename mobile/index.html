<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#2dd4bf">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="TypeKeep">
  <meta name="description" content="TypeKeep ‚Äî Cross-device clipboard sync & typing history companion">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <title>TypeKeep</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">

    <!-- Setup Screen (shown when not connected) -->
    <div id="setup-screen" class="screen active">
      <div class="setup-container">
        <div class="setup-logo">‚å®</div>
        <h1>TypeKeep</h1>
        <p class="setup-subtitle">Enter the same sync key you set on your desktop TypeKeep to connect your devices.</p>

        <div class="setup-form">
          <div class="field">
            <label>Sync Key (same as your desktop)</label>
            <input type="text" id="setup-sync-key" placeholder="my-secret-passphrase" autocomplete="off">
          </div>
          <div class="field">
            <label>Device Name</label>
            <input type="text" id="setup-device-name" placeholder="My Phone" value="">
          </div>
          <button class="btn-primary" onclick="connectCloud()">Connect</button>
          <p id="setup-error" class="error-text" style="display:none"></p>
        </div>

        <div class="setup-help">
          <details>
            <summary>How to set up sync</summary>
            <ol>
              <li>On your desktop, open TypeKeep dashboard ‚Üí <strong>Settings</strong></li>
              <li>Scroll to <strong>Cloud Sync</strong> section</li>
              <li>Enter a <strong>Sync Key</strong> (any passphrase you choose)</li>
              <li>Check <strong>Enable cloud sync</strong> and save</li>
              <li>Enter the <strong>same sync key</strong> above on your phone</li>
              <li>Done! Your devices are now connected</li>
            </ol>
          </details>
        </div>
      </div>
    </div>

    <!-- Main App Screen -->
    <div id="main-screen" class="screen">

      <!-- Header -->
      <header class="header">
        <div class="header-left">
          <span class="logo">‚å®</span>
          <span class="title">TypeKeep</span>
        </div>
        <div class="header-right">
          <button class="icon-btn" onclick="refreshData()" title="Refresh">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/>
              <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
            </svg>
          </button>
          <button class="icon-btn" onclick="openSettings()" title="Settings">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"/>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15 1.65 1.65 0 0 0 3.17 14H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68 1.65 1.65 0 0 0 10 3.17V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9 1.65 1.65 0 0 0 20.83 10H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
            </svg>
          </button>
        </div>
      </header>

      <!-- Device Bar -->
      <div class="device-bar" id="device-bar">
        <div class="device-chip self">
          <span class="device-dot online"></span>
          <span id="self-device-name">This Device</span>
        </div>
      </div>

      <!-- Tab Bar -->
      <nav class="tab-bar">
        <button class="tab active" data-tab="clipboard" onclick="switchTab('clipboard')">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/>
            <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
          </svg>
          <span>Clipboard</span>
        </button>
        <button class="tab" data-tab="history" onclick="switchTab('history')">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/>
          </svg>
          <span>History</span>
        </button>
        <button class="tab" data-tab="devices" onclick="switchTab('devices')">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/>
          </svg>
          <span>Devices</span>
        </button>
        <button class="tab" data-tab="add" onclick="switchTab('add')">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
          <span>Add</span>
        </button>
      </nav>

      <!-- Tab: Clipboard -->
      <div id="tab-clipboard" class="tab-panel active">
        <div class="section-header">
          <h2>Synced Clipboard</h2>
          <span class="badge" id="clip-count">0</span>
        </div>
        <div id="clipboard-list" class="card-list"></div>
        <div id="clipboard-empty" class="empty-state" style="display:none">
          <div class="empty-icon">üìã</div>
          <h3>No clipboard entries yet</h3>
          <p>Copy something on your desktop ‚Äî it'll appear here via cloud sync.</p>
        </div>
      </div>

      <!-- Tab: History -->
      <div id="tab-history" class="tab-panel">
        <div class="section-header">
          <h2>Typing History</h2>
          <span class="badge" id="msg-count">0</span>
        </div>
        <div id="history-list" class="card-list"></div>
        <div id="history-empty" class="empty-state" style="display:none">
          <div class="empty-icon">‚å®Ô∏è</div>
          <h3>No typing history yet</h3>
          <p>Your desktop TypeKeep will sync typing history here automatically.</p>
        </div>
      </div>

      <!-- Tab: Devices -->
      <div id="tab-devices" class="tab-panel">
        <div class="section-header">
          <h2>Connected Devices</h2>
        </div>
        <div id="devices-list" class="card-list"></div>
        <div id="devices-empty" class="empty-state" style="display:none">
          <div class="empty-icon">üîó</div>
          <h3>No other devices</h3>
          <p>Set up TypeKeep on another device with the same sync key.</p>
        </div>
      </div>

      <!-- Tab: Add Clipboard -->
      <div id="tab-add" class="tab-panel">
        <div class="section-header">
          <h2>Add to Clipboard</h2>
        </div>
        <div class="add-form">
          <textarea id="add-text" placeholder="Type or paste text to sync to all devices..." rows="6"></textarea>
          <button class="btn-primary" onclick="addClipboardEntry()">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/>
            </svg>
            Send to All Devices
          </button>
          <button class="btn-secondary" onclick="pasteFromClipboard()">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/>
              <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
            </svg>
            Paste from Phone Clipboard
          </button>
        </div>
      </div>

    </div>

    <!-- Settings Overlay -->
    <div id="settings-overlay" class="overlay" style="display:none">
      <div class="overlay-content">
        <div class="overlay-header">
          <h2>Settings</h2>
          <button class="icon-btn" onclick="closeSettings()">‚úï</button>
        </div>
        <div class="settings-body">
          <div class="field">
            <label>Sync Key</label>
            <input type="text" id="s-sync-key">
          </div>
          <div class="field">
            <label>Device Name</label>
            <input type="text" id="s-device-name">
          </div>
          <button class="btn-primary" onclick="saveSettings()">Save</button>
          <button class="btn-danger" onclick="disconnect()">Disconnect</button>
          <div class="app-info">
            <p>TypeKeep v3.0.0</p>
            <p><a href="https://github.com/leothefleo49/TypeKeep" target="_blank">GitHub</a></p>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast"></div>

  </div>

  <script src="app.js"></script>
</body>
</html>
